{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Specifies a list of actions that should be enforced in this policy. At least one of `user_approvers`, `user_approvers_ids`, `group_approvers`, `group_approvers_ids`, `role_approvers` should be provided.",
  "type": "array",
  "additionalItems": false,
  "items": {
    "anyOf": [
      {
        "required": [
          "type",
          "approvals_required",
          "user_approvers"
        ]
      },
      {
        "required": [
          "type",
          "approvals_required",
          "user_approvers_ids"
        ]
      },
      {
        "required": [
          "type",
          "approvals_required",
          "group_approvers"
        ]
      },
      {
        "required": [
          "type",
          "approvals_required",
          "group_approvers_ids"
        ]
      },
      {
        "required": [
          "type",
          "approvals_required",
          "role_approvers"
        ]
      }
    ],
    "type": "object",
    "properties": {
      "type": {
        "enum": [
          "require_approval"
        ],
        "type": "string",
        "description": "Specified a type of the policy action. `require_approval` action specifies required approvals (from selected groups or users) when this policy is applied."
      },
      "approvals_required": {
        "description": "Specifies a number of required merge request approvals.",
        "type": "integer",
        "minimum": 0,
        "maximum": 100
      },
      "user_approvers": {
        "description": "Specifies a list of users (by usernames) required to approve affected merge request.",
        "type": "array",
        "minItems": 1,
        "additionalItems": false,
        "items": {
          "minLength": 1,
          "type": "string"
        }
      },
      "user_approvers_ids": {
        "description": "Specifies a list of users (by IDs) required to approve affected merge request.",
        "type": "array",
        "minItems": 1,
        "additionalItems": false,
        "items": {
          "minLength": 1,
          "type": "integer"
        }
      },
      "group_approvers": {
        "type": "array",
        "description": "Specifies a list of groups (by group path) required to approve affected merge request.",
        "minItems": 1,
        "additionalItems": false,
        "items": {
          "minLength": 1,
          "type": "string"
        }
      },
      "group_approvers_ids": {
        "type": "array",
        "description": "Specifies a list of groups (by IDs) required to approve affected merge request.",
        "minItems": 1,
        "additionalItems": false,
        "items": {
          "minLength": 1,
          "type": "integer"
        }
      },
      "role_approvers": {
        "type": "array",
        "description": "Specifies a list of roles required to approve affected merge request.",
        "minItems": 1,
        "additionalItems": false,
        "items": {
          "type": "string",
          "enum": [
            "guest",
            "reporter",
            "developer",
            "maintainer",
            "owner"
          ],
          "minLength": 1
        }
      }
    }
  }
}
