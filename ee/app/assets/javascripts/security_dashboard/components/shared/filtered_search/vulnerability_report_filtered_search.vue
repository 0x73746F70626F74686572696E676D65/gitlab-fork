<script>
import { GlFilteredSearch } from '@gitlab/ui';
import { OPERATORS_IS, OPERATOR_IS } from '~/vue_shared/components/filtered_search_bar/constants';
import StatusToken from './tokens/status_token.vue';
import SeverityToken from './tokens/severity_token.vue';

export default {
  components: {
    GlFilteredSearch,
  },
  data() {
    return {
      value: [
        {
          type: 'status',
          value: {
            data: StatusToken.DEFAULT_VALUES,
            operator: OPERATOR_IS,
          },
        },
      ],
    };
  },
  computed: {
    tokens() {
      return [
        {
          type: 'status',
          title: StatusToken.i18n.statusLabel,
          multiSelect: true,
          unique: true,
          token: StatusToken,
          operators: OPERATORS_IS,
        },
        {
          type: 'severity',
          title: SeverityToken.i18n.label,
          multiSelect: true,
          unique: true,
          token: SeverityToken,
          operators: OPERATORS_IS,
        },
      ];
    },
  },
};
</script>

<template>
  <gl-filtered-search
    :placeholder="s__('Vulnerability|Search or filter vulnerabilities...')"
    :available-tokens="tokens"
    :value="value"
    terms-as-tokens
  />
</template>
