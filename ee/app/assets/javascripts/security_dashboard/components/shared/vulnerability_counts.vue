<script>
import { GlCard, GlSkeletonLoading } from '@gitlab/ui';
import SeverityBadge from 'ee/vue_shared/security_reports/components/severity_badge.vue';
import { SEVERITIES } from 'ee/security_dashboard/store/modules/vulnerabilities/constants';

export default {
  components: { GlCard, GlSkeletonLoading, SeverityBadge },
  props: {
    counts: {
      type: Object,
      required: true,
    },
    isLoading: {
      type: Boolean,
      required: false,
      default: false,
    },
  },
  computed: {
    severityCounts() {
      return SEVERITIES.map((severity) => ({
        severity,
        count: this.counts[severity] || 0,
      }));
    },
  },
};
</script>

<template>
  <div class="vulnerability-counts gl-font-weight-bold gl-text-center">
    <gl-card
      v-for="{ severity, count } in severityCounts"
      :key="severity"
      :data-testid="severity"
      header-class="gl-p-3"
      body-class="gl-font-size-h2"
    >
      <template #header>
        <severity-badge :severity="severity" class="gl-text-center!" />
      </template>
      <template #default>
        <gl-skeleton-loading
          v-if="isLoading"
          :lines="1"
          class="gl-display-flex gl-align-items-center"
        />
        <span v-else>{{ count }}</span>
      </template>
    </gl-card>
  </div>
</template>
