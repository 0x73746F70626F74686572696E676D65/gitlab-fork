<script>
import { s__, __ } from '~/locale';
import MarkdownEditor from '~/vue_shared/components/markdown/markdown_editor.vue';

export default {
  components: {
    MarkdownEditor,
  },
  inject: ['markdownDocsPath', 'markdownPreviewPath'],
  props: {
    isSubmitting: {
      type: Boolean,
      required: false,
      default: false,
    },
  },
  data() {
    return {
      solution: '',
      formFieldProps: {
        id: 'form-solution',
        name: 'form-solution',
        'aria-label': this.$options.i18n.description,
        placeholder: this.$options.i18n.description,
      },
    };
  },
  methods: {
    emitChanges() {
      this.$emit('change', { solution: this.solution });
    },
  },
  i18n: {
    title: __('Solution'),
    description: s__(
      'VulnerabilityManagement|(optional) Include the solution to the vulnerability if available.',
    ),
  },
  restrictedToolBarItems: ['attach-file'],
};
</script>
<template>
  <section>
    <header class="gl-pt-4 gl-mt-6 gl-mb-3 gl-border-t-gray-100 gl-border-t-solid gl-border-t-1">
      <h3 class="gl-mt-0">
        {{ $options.i18n.title }}
      </h3>
    </header>
    <div class="gl-border-solid gl-border-gray-100 gl-border-1 gl-rounded-base">
      <markdown-editor
        v-model="solution"
        :disable-attachments="true"
        :render-markdown-path="markdownPreviewPath"
        :markdown-docs-path="markdownDocsPath"
        :is-submitting="isSubmitting"
        :form-field-props="formFieldProps"
        @input="emitChanges"
      />
    </div>
  </section>
</template>
